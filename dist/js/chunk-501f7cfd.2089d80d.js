(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-501f7cfd"],{"13d5":function(t,e,a){"use strict";var i=a("23e7"),r=a("d58f").left,n=a("a640"),c=a("ae40"),o=a("2d00"),s=a("605d"),l=n("reduce"),u=c("reduce",{1:0}),d=!s&&o>79&&o<83;i({target:"Array",proto:!0,forced:!l||!u||d},{reduce:function(t){return r(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"39ba":function(t,e,a){"use strict";a.d(e,"a",(function(){return V}));var i=a("c637"),r=a("e863"),n=a("0056"),c=a("9bfa"),o=a("992e"),s=a("2326"),l=a("906c"),u=a("6b77"),d=a("7b1e"),b=a("3c21"),f=a("d82f"),p="collapsed",v="not-collapsed",m="__BV_toggle",_="".concat(m,"_HANDLER__"),g="".concat(m,"_CLICK__"),h="".concat(m,"_STATE__"),O="".concat(m,"_TARGETS__"),x="false",y="true",j="aria-controls",w="aria-expanded",C="role",D="tabindex",k="overflow-anchor",P=Object(u["d"])(i["r"],"toggle"),I=Object(u["e"])(i["r"],"state"),L=Object(u["e"])(i["r"],"sync-state"),F=Object(u["d"])(i["r"],"request-state"),S=[c["c"],c["j"]],E=function(t){return!Object(s["a"])(["button","a"],t.tagName.toLowerCase())},N=function(t,e){var a=t.modifiers,i=t.arg,r=t.value,n=Object(f["h"])(a||{});if(r=Object(d["m"])(r)?r.split(o["r"]):r,Object(l["t"])(e.tagName,"a")){var c=Object(l["h"])(e,"href")||"";o["h"].test(c)&&n.push(c.replace(o["g"],""))}return Object(s["b"])(i,r).forEach((function(t){return Object(d["m"])(t)&&n.push(t)})),n.filter((function(t,e,a){return t&&a.indexOf(t)===e}))},A=function(t){var e=t[g];e&&(Object(u["a"])(t,"click",e,n["P"]),Object(u["a"])(t,"keydown",e,n["P"])),t[g]=null},T=function(t,e){if(A(t),e.context){var a=function(a){if(("keydown"!==a.type||Object(s["a"])(S,a.keyCode))&&!Object(l["r"])(t)){var i=t[O]||[];i.forEach((function(t){e.context.$root.$emit(P,t)}))}};t[g]=a,Object(u["b"])(t,"click",a,n["P"]),E(t)&&Object(u["b"])(t,"keydown",a,n["P"])}},B=function(t,e){t[_]&&e.context&&e.context.$root.$off([I,L],t[_]),t[_]=null},$=function(t,e){if(B(t,e),e.context){var a=function(e,a){Object(s["a"])(t[O]||[],e)&&(t[h]=a,R(t,a))};t[_]=a,e.context.$root.$on([I,L],a)}},R=function(t,e){e?(Object(l["y"])(t,p),Object(l["b"])(t,v),Object(l["E"])(t,w,y)):(Object(l["y"])(t,v),Object(l["b"])(t,p),Object(l["E"])(t,w,x))},M=function(t,e){t[e]=null,delete t[e]},U=function(t,e,a){if(r["f"]&&a.context){E(t)&&(Object(l["o"])(t,C)||Object(l["E"])(t,C,"button"),Object(l["o"])(t,D)||Object(l["E"])(t,D,"0")),R(t,t[h]);var i=N(e,t);i.length>0?(Object(l["E"])(t,j,i.join(" ")),Object(l["F"])(t,k,"none")):(Object(l["x"])(t,j),Object(l["A"])(t,k)),Object(l["B"])((function(){T(t,a)})),Object(b["a"])(i,t[O])||(t[O]=i,i.forEach((function(t){a.context.$root.$emit(F,t)})))}},V={bind:function(t,e,a){t[h]=!1,t[O]=[],$(t,a),U(t,e,a)},componentUpdated:U,updated:U,unbind:function(t,e,a){A(t),B(t,a),M(t,_),M(t,g),M(t,h),M(t,O),Object(l["y"])(t,p),Object(l["y"])(t,v),Object(l["x"])(t,w),Object(l["x"])(t,j),Object(l["x"])(t,C),Object(l["A"])(t,k)}}},"408a":function(t,e,a){var i=a("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=i(t))throw TypeError("Incorrect invocation");return+t}},"4a1a":function(t,e,a){"use strict";a("63d5")},"57d9":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"invoice-preview-wrapper"},[t._m(0),a("b-alert",{attrs:{variant:"danger",show:void 0===t.invoiceData}},[a("h4",{staticClass:"alert-heading"},[t._v(" Error fetching invoice data ")]),a("div",{staticClass:"alert-body"},[t._v(" No invoice found with this invoice id. Check "),a("b-link",{staticClass:"alert-link",attrs:{to:{name:"apps-invoice-list"}}},[t._v(" Invoice List ")]),t._v(" for other invoices. ")],1)]),t.invoiceData?a("b-row",{staticClass:"invoice-preview justify-content-center"},[a("b-col",{attrs:{cols:"12",xl:"9",md:"8"}},[a("b-card",{staticClass:"invoice-preview-card",attrs:{"no-body":""}},[a("b-card-body",{staticClass:"pb-0"},[a("div",{staticClass:"d-flex justify-content-between flex-md-row flex-column mt-0"},[a("div",[a("div",{staticClass:"logo-wrapper mb-25"},[a("logo"),a("div",{staticClass:"ml-5 text-center"},[a("span",{staticClass:"d-block text-info ml-1",staticStyle:{"font-size":"2rem","font-weight":"500","letter-spacing":"1px"}},[t._v("DISTRIBUIDORA E INVERSIONES")]),a("span",{staticClass:"d-block text-info ml-1",staticStyle:{"font-size":"3rem","font-weight":"700","letter-spacing":"2px","text-shadow":"0 2px 8px rgba(0,0,0,0.08)"}},[t._v("LACTEOS MV 2016, C.A.")]),a("p",{staticClass:"text-center text-info"},[t._v(" Av. Principal, Casa S/N Sector La Raya (La Raya Arriba) Barinas Zona Postal 5217. ")])])],1),a("b-card-text",{staticClass:"mb-25 ml-2"},[a("strong",[t._v("Rif-J-41237828-7")])]),a("b-card-text",{staticClass:"mb-25 ml-1"},[a("strong",[t._v("Tlf-(0416)-195-70-38")]),a("br"),a("strong",[t._v("Tlf-(0412)-673-47-76")])])],1),a("div",{staticClass:"mt-md-0 mt-2 float-right fechaIzquierda"},[a("h4",{staticClass:"invoice-title mb-25"},[t._v(" N° "),a("span",{staticClass:"invoice-number"},[t._v("#"+t._s(t.invoiceNumber))])]),a("div",{staticClass:"invoice-date-wrapper"},[a("p",{staticClass:"invoice-date-title"},[t._v(" Fecha: ")]),a("p",{staticClass:"invoice-date"},[t._v(" "+t._s(new Date(t.invoiceData.created_at).toLocaleDateString("es-ES"))+" ")])])])]),a("div",{staticStyle:{"margin-top":"-7rem"}},[a("h3",{staticClass:"text-center text-info"},[a("strong",[t._v("Reporte Semanal del Productor")])]),a("p",{staticClass:"text-center mb-0"},[a("strong",[t._v("Del "+t._s(new Date(t.invoiceData.start_week).toLocaleDateString("es-ES"))+" Al "+t._s(new Date(t.invoiceData.end_week).toLocaleDateString("es-ES")))])])])]),a("hr",{staticClass:"invoice-spacing mb-25 mt-3"}),t.invoiceData.id&&t.invoiceData.producer&&t.invoiceData.producer[0]?a("p",{staticClass:"text-center p-0 m-0"},[a("strong",[t._v("Productor:")]),t._v(" "+t._s(t.invoiceData.producer[0].dni)+" - "+t._s(t.invoiceData.producer[0].name)+" "),a("strong",[t._v("TLF:")]),t._v(" "+t._s(t.invoiceData.producer[0].phone)+" "),a("strong",[t._v("Finca:")]),t._v(" "+t._s(t.invoiceData.producer[0].farm)+" "),a("strong",[t._v("Dirección:")]),t._v(" "+t._s(t.invoiceData.producer[0].address)+" ")]):t._e(),t.loaded?a("b-table",{staticClass:"table-sm text-center border-0",attrs:{small:"",responsive:"",items:t.invoiceData.milk_loads,fields:t.fields},scopedSlots:t._u([{key:"cell(created_at)",fn:function(e){return[a("b-card-text",{staticClass:"text-nowrap mb-25"},[t._v(" "+t._s(t.formatDate(e.value,!0).split(",")[0])+" ")]),a("b-card-text",{staticClass:"font-weight-bold mb-25"},[t._v(" "+t._s(t.formatDate(e.value,!1))+" ")])]}},{key:"cell(liters)",fn:function(e){return[a("b-card-text",{staticClass:"font-weight-bold mb-25"},[t._v(" "+t._s(e.value)+" Lts ")])]}},{key:"cell(price_per_liter)",fn:function(e){return[a("b-card-text",{staticClass:"font-weight-bold mb-25"},[t._v(" $"+t._s((Number(t.pricePerLiterInput)>0?Number(t.pricePerLiterInput):Number(e.item.price_per_liter)||0).toFixed(2))+" ")])]}},{key:"cell(subTotal)",fn:function(e){return[a("b-card-text",{staticClass:"font-weight-bold mb-25"},[t._v(" $"+t._s(((Number(t.pricePerLiterInput)>0?Number(t.pricePerLiterInput):Number(e.item.price_per_liter)||0)*(Number(e.item.liters)||0)).toFixed(2))+" ")])]}}],null,!1,1997441941)}):t._e(),a("b-col",{staticClass:"float-right",attrs:{cols:"12",xl:"12"}},[a("h5",{staticClass:"p-0 ml-2 float-left text-info"},[t._v(" Total en Litros: "+t._s(t.invoiceData.liters)+"Lts ")]),a("div",{staticClass:"float-right text-info",staticStyle:{"text-align":"right"}},[a("h4",{staticClass:"p-0 mb-1 text-info"},[t._v(" "+t._s("Pagado"===t.invoiceData.status?" Total Pagado":" Total a Pagar")+" Bs "+t._s("Pagado"===t.invoiceData.status?Number(t.invoiceData.amount_bss).toFixed(2):t.recalculatedAmountBs.toFixed(2))+" ~ $"+t._s("Pagado"===t.invoiceData.status?Number(t.invoiceData.amount).toFixed(2):t.recalculatedAmount.toFixed(2))+" ")])]),a("hr",{staticClass:"invoice-spacing"})])],1)],1),a("b-col",{staticClass:"invoice-actions",attrs:{cols:"12",md:"4",xl:"3"}},[a("b-card",{staticClass:"position-fixed",staticStyle:{width:"18%"}},[a("div",{staticClass:"mb-1 text-center"},[a("b-badge",{attrs:{pill:"",variant:"Pendiente"===t.invoiceData.status?"warning":"success"}},[t._v(" "+t._s(t.invoiceData.status)+" ")])],1),"Pendiente"!==t.invoiceData.status?a("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(186, 191, 199, 0.15)",expression:"'rgba(186, 191, 199, 0.15)'",modifiers:{400:!0}}],staticClass:"mb-75",attrs:{variant:"outline-info",block:""},on:{click:t.printInvoice}},[t._v(" Imprimir ")]):t._e(),"Pagado"!==t.invoiceData.status?a("div",{staticClass:"mb-1"},[a("label",{staticClass:"d-block text-center mb-50"},[t._v("Precio por Litro ")]),a("b-form-input",{attrs:{type:"number",step:"0.01",min:"0",placeholder:"0.00"},model:{value:t.pricePerLiterInput,callback:function(e){t.pricePerLiterInput=t._n(e)},expression:"pricePerLiterInput"}})],1):t._e(),"Pendiente"===t.invoiceData.status?a("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mb-75",attrs:{variant:"outline-success",block:""},on:{click:function(e){return t.paidProducer(t.invoiceData.id)}}},[t._v(" Pagar ")]):t._e()],1)],1)],1):t._e()],1)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"invoice-watermark-bg only-print"},[a("img",{attrs:{src:"/logoMV.png",alt:"Logo Marca de Agua"}})])}],n=a("c7eb"),c=a("1da1"),o=a("5530"),s=(a("7db0"),a("13d5"),a("a9e3"),a("b680"),a("d3b7"),a("4d90"),a("39ba")),l=a("a15b7"),u=a("b28b"),d=a("205f"),b=a("1947"),f=a("6197"),p=a("29a1"),v=a("d6e4"),m=a("5fda"),_=a("aa59"),g=a("e98b"),h=a("4797"),O=a("088b"),x=a("e009"),y=a("2f62"),j=a("2b0e"),w=a("a2b6"),C={directives:{Ripple:x["a"],"b-toggle":s["a"]},components:{BRow:l["a"],BCol:u["a"],BCard:d["a"],BButton:b["a"],BCardBody:f["a"],BTable:p["a"],BCardText:v["a"],BAlert:m["a"],BLink:_["a"],BBadge:g["a"],BFormInput:h["a"],Logo:O["a"]},data:function(){return{invoiceData:j["default"].observable({}),convercion:null,liters:null,totalIva:"0.00",pricePerLiterInput:0,fields:[{key:"created_at",label:"Fecha",sortable:!0},{key:"liters",label:"Litros",sortable:!0},{key:"price_per_liter",label:"Precio",sortable:!0},{key:"subTotal",label:"Sub Total",sortable:!0}],producer:[{key:"dni",label:"Identificación"},{key:"name",label:"Productor"},{key:"phone",label:"Teléfono"},{key:"farm",label:"Finca"},{key:"address",label:"Dirección"}],loaded:!1}},computed:Object(o["a"])(Object(o["a"])({},Object(y["b"])({items:function(t){return t.payment.invoice},currency:function(t){return t.currency.items}})),{},{recalculatedAmount:function(){if(!this.invoiceData||!this.invoiceData.milk_loads)return 0;var t=parseFloat(this.pricePerLiterInput);return t&&t>0?this.invoiceData.milk_loads.reduce((function(e,a){var i=parseFloat(a.liters)||0;return e+i*t}),0):this.invoiceData.milk_loads.reduce((function(t,e){var a=parseFloat(e.liters)||0,i=parseFloat(e.price_per_liter)||0;return t+a*i}),0)},recalculatedAmountBs:function(){var t=parseFloat(this.convercion)||0;return this.recalculatedAmount*t},invoiceNumber:function(){return this.invoiceData&&this.invoiceData.id?String(this.invoiceData.id).padStart(8,"0"):""}}),mounted:function(){this.getItems()},methods:{getItems:function(){var t=this;this.$store.dispatch("currency/get").then((function(){var e=t.currency.find((function(t){var e=t.id;return 1===e})),a=e?parseFloat(e.price):0,i=t.currency.find((function(t){var e=t.id;return 2===e})),r=i?parseFloat(i.price):0;t.convercion=a,t.liters=r,console.log(t.convercion,t.liters)})),this.$store.dispatch("payment/getInvoice",{id:this.$route.params.id}).then((function(){var e=t.items;if(e){var a=e.milk_loads,i=e.payment,r=i.id,n=i.liters,c=i.payable,o=[c],s=i.created_at,l=i.start_week,u=i.end_week,d=i.amount,b=i.amount_bss,f=i.status;t.invoiceData={id:r,milk_loads:a,payment:i,liters:n,producer:o,created_at:s,start_week:l,end_week:u,amount:d,amount_bss:b,status:f},i&&i.price_per_liter?t.pricePerLiterInput=parseFloat(i.price_per_liter):t.pricePerLiterInput=0}t.loaded=!0}))},formatDate:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=new Date(t);if(!a)return"";var i=e?{weekday:"long",year:"numeric",month:"2-digit",day:"2-digit",timeZone:"UTC"}:{year:"numeric",month:"2-digit",day:"2-digit",timeZone:"UTC"};return a.toLocaleDateString("es-ES",i)},printInvoice:function(){window.print()},paidProducer:function(t){var e=this;return Object(c["a"])(Object(n["a"])().mark((function a(){var i,r,c;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(w["a"])("¿Está seguro de Pagar este Productor?");case 2:if(i=a.sent,!i.value){a.next=11;break}return r={id:t,amount:Number(e.recalculatedAmount.toFixed(2)),amount_bss:Number(e.recalculatedAmountBs.toFixed(2)),price_per_liter:Number(parseFloat(e.pricePerLiterInput)||0)},a.next=7,e.$store.dispatch("payment/paid",r);case 7:c=a.sent,console.log(c),e.$swal("Pagado","El Productor ha sido Pagado","success"),e.getItems();case 11:case"end":return a.stop()}}),a)})))()}}},D=C,k=(a("4a1a"),a("8b73"),a("92c9"),a("2877")),P=Object(k["a"])(D,i,r,!1,null,"69e6eb82",null);e["default"]=P.exports},"63d5":function(t,e,a){},6860:function(t,e,a){},"7db0":function(t,e,a){"use strict";var i=a("23e7"),r=a("b727").find,n=a("44d2"),c=a("ae40"),o="find",s=!0,l=c(o);o in[]&&Array(1)[o]((function(){s=!1})),i({target:"Array",proto:!0,forced:s||!l},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n(o)},"8b73":function(t,e,a){"use strict";a("6860")},"8e13":function(t,e,a){},"92c9":function(t,e,a){"use strict";a("8e13")},b680:function(t,e,a){"use strict";var i=a("23e7"),r=a("a691"),n=a("408a"),c=a("1148"),o=a("d039"),s=1..toFixed,l=Math.floor,u=function(t,e,a){return 0===e?a:e%2===1?u(t,e-1,a*t):u(t*t,e/2,a)},d=function(t){var e=0,a=t;while(a>=4096)e+=12,a/=4096;while(a>=2)e+=1,a/=2;return e},b=s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!o((function(){s.call({})}));i({target:"Number",proto:!0,forced:b},{toFixed:function(t){var e,a,i,o,s=n(this),b=r(t),f=[0,0,0,0,0,0],p="",v="0",m=function(t,e){var a=-1,i=e;while(++a<6)i+=t*f[a],f[a]=i%1e7,i=l(i/1e7)},_=function(t){var e=6,a=0;while(--e>=0)a+=f[e],f[e]=l(a/t),a=a%t*1e7},g=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==f[t]){var a=String(f[t]);e=""===e?a:e+c.call("0",7-a.length)+a}return e};if(b<0||b>20)throw RangeError("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return String(s);if(s<0&&(p="-",s=-s),s>1e-21)if(e=d(s*u(2,69,1))-69,a=e<0?s*u(2,-e,1):s/u(2,e,1),a*=4503599627370496,e=52-e,e>0){m(0,a),i=b;while(i>=7)m(1e7,0),i-=7;m(u(10,i,1),0),i=e-1;while(i>=23)_(1<<23),i-=23;_(1<<i),m(1,1),_(2),v=g()}else m(0,a),m(1<<-e,0),v=g()+c.call("0",b);return b>0?(o=v.length,v=p+(o<=b?"0."+c.call("0",b-o)+v:v.slice(0,o-b)+"."+v.slice(o-b))):v=p+v,v}})},d58f:function(t,e,a){var i=a("1c0b"),r=a("7b0b"),n=a("44ad"),c=a("50c4"),o=function(t){return function(e,a,o,s){i(a);var l=r(e),u=n(l),d=c(l.length),b=t?d-1:0,f=t?-1:1;if(o<2)while(1){if(b in u){s=u[b],b+=f;break}if(b+=f,t?b<0:d<=b)throw TypeError("Reduce of empty array with no initial value")}for(;t?b>=0:d>b;b+=f)b in u&&(s=a(s,u[b],b,l));return s}};t.exports={left:o(!1),right:o(!0)}},e98b:function(t,e,a){"use strict";a.d(e,"a",(function(){return m}));var i=a("2b0e"),r=a("b42e"),n=a("c637"),c=a("a723"),o=a("d82f"),s=a("cf75"),l=a("4a38"),u=a("aa59");function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function b(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(Object(a),!0).forEach((function(e){f(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function f(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var p=Object(o["j"])(u["b"],["event","routerTag"]);delete p.href.default,delete p.to.default;var v=Object(s["d"])(Object(o["m"])(b(b({},p),{},{pill:Object(s["c"])(c["g"],!1),tag:Object(s["c"])(c["t"],"span"),variant:Object(s["c"])(c["t"],"secondary")})),n["c"]),m=i["default"].extend({name:n["c"],functional:!0,props:v,render:function(t,e){var a=e.props,i=e.data,n=e.children,c=a.active,o=a.disabled,d=Object(l["d"])(a),b=d?u["a"]:a.tag,f=a.variant||"secondary";return t(b,Object(r["a"])(i,{staticClass:"badge",class:["badge-".concat(f),{"badge-pill":a.pill,active:c,disabled:o}],props:d?Object(s["e"])(p,a):{}}),n)}})}}]);
//# sourceMappingURL=chunk-501f7cfd.2089d80d.js.map
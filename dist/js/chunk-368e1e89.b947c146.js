(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-368e1e89"],{"03b3":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"invoice-preview-wrapper"},[t._m(0),a("b-alert",{attrs:{variant:"danger",show:void 0===t.invoiceData}},[a("h4",{staticClass:"alert-heading"},[t._v(" Error fetching invoice data ")]),a("div",{staticClass:"alert-body"},[t._v(" No invoice found with this invoice id. Check "),a("b-link",{staticClass:"alert-link",attrs:{to:{name:"apps-invoice-list"}}},[t._v(" Invoice List ")]),t._v(" for other invoices. ")],1)]),t.invoiceData?a("b-row",{staticClass:"invoice-preview justify-content-center"},[a("b-col",{attrs:{cols:"12",xl:"9",md:"8"}},[a("b-card",{staticClass:"invoice-preview-card",attrs:{"no-body":""}},[a("b-card-body",{staticClass:"pb-0"},[a("div",{staticClass:"d-flex justify-content-between flex-md-row flex-column mt-0"},[a("div",[a("div",{staticClass:"logo-wrapper mb-25"},[a("logo"),a("div",{staticClass:"ml-5 text-center"},[a("span",{staticClass:"d-block text-info ml-1",staticStyle:{"font-size":"2rem","font-weight":"500","letter-spacing":"1px"}},[t._v("DISTRIBUIDORA E INVERSIONES")]),a("span",{staticClass:"d-block text-info ml-1",staticStyle:{"font-size":"3rem","font-weight":"700","letter-spacing":"2px","text-shadow":"0 2px 8px rgba(0,0,0,0.08)"}},[t._v("LACTEOS MV 2016, C.A.")]),a("p",{staticClass:"text-center text-info"},[t._v(" Av. Principal, Casa S/N Sector La Raya (La Raya Arriba) Barinas Zona Postal 5217. ")])])],1),a("b-card-text",{staticClass:"mb-25 ml-2"},[a("strong",[t._v("Rif-J-41237828-7")])]),a("b-card-text",{staticClass:"mb-25 ml-1"},[a("strong",[t._v("Tlf-(0416)-195-70-38")]),a("br"),a("strong",[t._v("Tlf-(0412)-673-47-76")])])],1),a("div",{staticClass:"mt-md-0 mt-2 float-right fechaIzquierda"},[a("h4",{staticClass:"invoice-title mb-25"},[t._v(" N° "),a("span",{staticClass:"invoice-number"},[t._v("#"+t._s(t.invoiceNumber))])]),a("div",{staticClass:"invoice-date-wrapper"},[a("p",{staticClass:"invoice-date-title"},[t._v(" Fecha: ")]),a("p",{staticClass:"invoice-date"},[t._v(" "+t._s(new Date(t.invoiceData.created_at).toLocaleDateString("es-ES"))+" ")])])])]),a("div",{staticStyle:{"margin-top":"-7rem"}},[a("h3",{staticClass:"text-center text-info"},[a("strong",[t._v("Reporte Semanal del Rutero")])]),a("p",{staticClass:"text-center mb-0"},[a("strong",[t._v("Del "+t._s(new Date(t.invoiceData.start_week).toLocaleDateString("es-ES"))+" Al "+t._s(new Date(t.invoiceData.end_week).toLocaleDateString("es-ES")))])])])]),a("hr",{staticClass:"invoice-spacing mb-25 mt-3"}),t.invoiceData.id&&t.invoiceData.carrier&&t.invoiceData.carrier[0]?a("p",{staticClass:"text-center p-0 m-0"},[a("strong",[t._v("Rutero:")]),t._v(" "+t._s(t.invoiceData.carrier[0].dni)+" - "+t._s(t.invoiceData.carrier[0].name)+" "),a("strong",[t._v("TLF:")]),t._v(" "+t._s(t.invoiceData.carrier[0].phone)+" "),a("strong",[t._v("Dirección:")]),t._v(" "+t._s(t.invoiceData.carrier[0].address)+" ")]):t._e(),t.loaded?a("b-table",{staticClass:"table-sm text-center border-0",attrs:{small:"",responsive:"",items:t.invoiceData.milk_loads,fields:t.fields},scopedSlots:t._u([{key:"cell(created_at)",fn:function(e){return[a("b-card-text",{staticClass:"text-nowrap mb-25"},[t._v(" "+t._s(t.formatDate(e.value,!0).split(",")[0])+" ")]),a("b-card-text",{staticClass:"font-weight-bold mb-25"},[t._v(" "+t._s(t.formatDate(e.value,!1))+" ")])]}},{key:"cell(producer.name)",fn:function(e){return[a("b-card-text",{staticClass:"font-weight-bold mb-25"},[t._v(" "+t._s(e.value)+" ")])]}},{key:"cell(liters)",fn:function(e){return[a("b-card-text",{staticClass:"font-weight-bold mb-25"},[t._v(" "+t._s(e.value)+" Lts ")])]}},{key:"cell(price_per_carrier)",fn:function(e){return[a("b-card-text",{staticClass:"font-weight-bold mb-25"},[t._v(" $"+t._s((Number(t.pricePerCarrierInput)>0?Number(t.pricePerCarrierInput):Number(e.item.price_per_carrier)||0).toFixed(2))+" ")])]}},{key:"cell(subTotal)",fn:function(e){return[a("b-card-text",{staticClass:"font-weight-bold mb-25"},[t._v(" $"+t._s(((Number(t.pricePerCarrierInput)>0?Number(t.pricePerCarrierInput):Number(e.item.price_per_carrier)||0)*(Number(e.item.liters)||0)).toFixed(2))+" ")])]}}],null,!1,1079977648)}):t._e(),a("b-col",{staticClass:"float-right",attrs:{cols:"12",xl:"12"}},[a("h5",{staticClass:"p-0 ml-2 float-left text-info"},[t._v(" Total en Litros: "+t._s(t.invoiceData.liters)+"Lts ")]),a("div",{staticClass:"float-right text-info",staticStyle:{"text-align":"right"}},[a("h4",{staticClass:"p-0 mb-1 text-info"},[t._v(" "+t._s("Pagado"===t.invoiceData.status?" Total Pagado":" Total a Pagar")+" Bs "+t._s("Pagado"===t.invoiceData.status?t.invoiceData.amount_bss?t.invoiceData.amount_bss:"0.00":t.recalculatedAmountBs.toFixed(2))+" ~ $"+t._s("Pagado"===t.invoiceData.status?t.invoiceData.amount?t.invoiceData.amount:"0.00":t.recalculatedAmount.toFixed(2))+" ")])]),a("hr",{staticClass:"invoice-spacing"})])],1)],1),a("b-col",{staticClass:"invoice-actions",attrs:{cols:"12",md:"4",xl:"3"}},[a("b-card",{staticClass:"position-fixed",staticStyle:{width:"18%"}},[a("div",{staticClass:"mb-1 text-center"},[a("b-badge",{attrs:{pill:"",variant:"Pendiente"===t.invoiceData.status?"warning":"success"}},[t._v(" "+t._s(t.invoiceData.status)+" ")])],1),"Pendiente"!==t.invoiceData.status?a("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(186, 191, 199, 0.15)",expression:"'rgba(186, 191, 199, 0.15)'",modifiers:{400:!0}}],staticClass:"mb-75",attrs:{variant:"outline-info",block:""},on:{click:t.printInvoice}},[t._v(" Imprimir ")]):t._e(),"Pagado"!==t.invoiceData.status?a("div",{staticClass:"mb-1"},[a("label",{staticClass:"d-block text-center mb-50"},[t._v("Precio por Rutero ")]),a("b-form-input",{attrs:{type:"number",step:"0.01",min:"0",placeholder:"0.00"},model:{value:t.pricePerCarrierInput,callback:function(e){t.pricePerCarrierInput=t._n(e)},expression:"pricePerCarrierInput"}})],1):t._e(),"Pendiente"===t.invoiceData.status?a("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mb-75",attrs:{variant:"outline-success",block:""},on:{click:function(e){return t.paidCarrier(t.invoiceData.id)}}},[t._v(" Pagar ")]):t._e()],1)],1)],1):t._e()],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"invoice-watermark-bg only-print"},[a("img",{attrs:{src:"/logoMV.png",alt:"Logo Marca de Agua"}})])}],n=a("c7eb"),c=a("1da1"),o=a("5530"),s=(a("7db0"),a("13d5"),a("a9e3"),a("b680"),a("d3b7"),a("4d90"),a("39ba")),l=a("a15b7"),u=a("b28b"),d=a("205f"),b=a("1947"),f=a("6197"),v=a("29a1"),p=a("d6e4"),m=a("5fda"),_=a("aa59"),g=a("e98b"),h=a("4797"),O=a("088b"),x=a("e009"),y=a("2f62"),C=a("2b0e"),j=a("a2b6"),w={directives:{Ripple:x["a"],"b-toggle":s["a"]},components:{BRow:l["a"],BCol:u["a"],BCard:d["a"],BButton:b["a"],BCardBody:f["a"],BTable:v["a"],BCardText:p["a"],BAlert:m["a"],BLink:_["a"],BBadge:g["a"],BFormInput:h["a"],Logo:O["a"]},data:function(){return{invoiceData:C["default"].observable({}),convercion:null,liters:null,totalIva:"0.00",pricePerCarrierInput:0,fields:[{key:"created_at",label:"Fecha",sortable:!0},{key:"producer.name",label:"Productor"},{key:"liters",label:"Litros",sortable:!0},{key:"price_per_carrier",label:"Precio",sortable:!0},{key:"subTotal",label:"Sub Total",sortable:!0}],carrier:[{key:"dni",label:"Identificación"},{key:"name",label:"Rutero"},{key:"phone",label:"Teléfono"},{key:"address",label:"Dirección"}],loaded:!1}},computed:Object(o["a"])(Object(o["a"])({},Object(y["b"])({items:function(t){return t.payment.invoice},currency:function(t){return t.currency.items}})),{},{recalculatedAmount:function(){if(!this.invoiceData||!this.invoiceData.milk_loads)return 0;var t=parseFloat(this.pricePerCarrierInput);return t&&t>0?this.invoiceData.milk_loads.reduce((function(e,a){var r=parseFloat(a.liters)||0;return e+r*t}),0):this.invoiceData.milk_loads.reduce((function(t,e){var a=parseFloat(e.liters)||0,r=parseFloat(e.price_per_carrier)||0;return t+a*r}),0)},recalculatedAmountBs:function(){var t=parseFloat(this.convercion)||0;return this.recalculatedAmount*t},invoiceNumber:function(){return this.invoiceData&&this.invoiceData.id?String(this.invoiceData.id).padStart(8,"0"):""}}),mounted:function(){this.getItems()},methods:{getItems:function(){var t=this;this.$store.dispatch("currency/get").then((function(){var e=t.currency.find((function(t){var e=t.id;return 1===e})),a=e?parseFloat(e.price):0,r=t.currency.find((function(t){var e=t.id;return 3===e})),i=r?parseFloat(r.price):0;t.convercion=a,t.liters=i,console.log(t.convercion,t.liters)})),this.$store.dispatch("payment/getInvoiceCarrier",{id:this.$route.params.id}).then((function(){var e=t.items;if(e){var a=e.milk_loads,r=e.payment,i=r.id,n=r.liters,c=r.payable,o=[c],s=r.created_at,l=r.start_week,u=r.end_week,d=r.amount,b=r.amount_bss,f=r.status;t.invoiceData={id:i,milk_loads:a,payment:r,liters:n,carrier:o,created_at:s,start_week:l,end_week:u,amount:d,amount_bss:b,status:f},r&&r.price_per_carrier?t.pricePerCarrierInput=parseFloat(r.price_per_carrier):t.pricePerCarrierInput=0}t.loaded=!0}))},formatDate:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=new Date(t);if(!a)return"";var r=e?{weekday:"long",year:"numeric",month:"2-digit",day:"2-digit",timeZone:"UTC"}:{year:"numeric",month:"2-digit",day:"2-digit",timeZone:"UTC"};return a.toLocaleDateString("es-ES",r)},printInvoice:function(){window.print()},paidCarrier:function(t){var e=this;return Object(c["a"])(Object(n["a"])().mark((function a(){var r,i,c;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(j["a"])("¿Está seguro de Pagar este Rutero?");case 2:if(r=a.sent,!r.value){a.next=11;break}return i={id:t,amount:Number(e.recalculatedAmount.toFixed(2)),amount_bss:Number(e.recalculatedAmountBs.toFixed(2)),price_per_carrier:Number(parseFloat(e.pricePerCarrierInput)||0)},a.next=7,e.$store.dispatch("payment/paid",i);case 7:c=a.sent,console.log(c),e.$swal("Pagado","El Rutero ha sido Pagado","success"),e.getItems();case 11:case"end":return a.stop()}}),a)})))()}}},D=w,k=(a("3fda"),a("7f93"),a("60bb"),a("2877")),P=Object(k["a"])(D,r,i,!1,null,"399546ba",null);e["default"]=P.exports},"13d5":function(t,e,a){"use strict";var r=a("23e7"),i=a("d58f").left,n=a("a640"),c=a("ae40"),o=a("2d00"),s=a("605d"),l=n("reduce"),u=c("reduce",{1:0}),d=!s&&o>79&&o<83;r({target:"Array",proto:!0,forced:!l||!u||d},{reduce:function(t){return i(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},2236:function(t,e,a){},"2c66":function(t,e,a){},"39ba":function(t,e,a){"use strict";a.d(e,"a",(function(){return V}));var r=a("c637"),i=a("e863"),n=a("0056"),c=a("9bfa"),o=a("992e"),s=a("2326"),l=a("906c"),u=a("6b77"),d=a("7b1e"),b=a("3c21"),f=a("d82f"),v="collapsed",p="not-collapsed",m="__BV_toggle",_="".concat(m,"_HANDLER__"),g="".concat(m,"_CLICK__"),h="".concat(m,"_STATE__"),O="".concat(m,"_TARGETS__"),x="false",y="true",C="aria-controls",j="aria-expanded",w="role",D="tabindex",k="overflow-anchor",P=Object(u["d"])(r["r"],"toggle"),I=Object(u["e"])(r["r"],"state"),S=Object(u["e"])(r["r"],"sync-state"),E=Object(u["d"])(r["r"],"request-state"),F=[c["c"],c["j"]],N=function(t){return!Object(s["a"])(["button","a"],t.tagName.toLowerCase())},A=function(t,e){var a=t.modifiers,r=t.arg,i=t.value,n=Object(f["h"])(a||{});if(i=Object(d["m"])(i)?i.split(o["r"]):i,Object(l["t"])(e.tagName,"a")){var c=Object(l["h"])(e,"href")||"";o["h"].test(c)&&n.push(c.replace(o["g"],""))}return Object(s["b"])(r,i).forEach((function(t){return Object(d["m"])(t)&&n.push(t)})),n.filter((function(t,e,a){return t&&a.indexOf(t)===e}))},T=function(t){var e=t[g];e&&(Object(u["a"])(t,"click",e,n["P"]),Object(u["a"])(t,"keydown",e,n["P"])),t[g]=null},B=function(t,e){if(T(t),e.context){var a=function(a){if(("keydown"!==a.type||Object(s["a"])(F,a.keyCode))&&!Object(l["r"])(t)){var r=t[O]||[];r.forEach((function(t){e.context.$root.$emit(P,t)}))}};t[g]=a,Object(u["b"])(t,"click",a,n["P"]),N(t)&&Object(u["b"])(t,"keydown",a,n["P"])}},L=function(t,e){t[_]&&e.context&&e.context.$root.$off([I,S],t[_]),t[_]=null},R=function(t,e){if(L(t,e),e.context){var a=function(e,a){Object(s["a"])(t[O]||[],e)&&(t[h]=a,$(t,a))};t[_]=a,e.context.$root.$on([I,S],a)}},$=function(t,e){e?(Object(l["y"])(t,v),Object(l["b"])(t,p),Object(l["E"])(t,j,y)):(Object(l["y"])(t,p),Object(l["b"])(t,v),Object(l["E"])(t,j,x))},M=function(t,e){t[e]=null,delete t[e]},U=function(t,e,a){if(i["f"]&&a.context){N(t)&&(Object(l["o"])(t,w)||Object(l["E"])(t,w,"button"),Object(l["o"])(t,D)||Object(l["E"])(t,D,"0")),$(t,t[h]);var r=A(e,t);r.length>0?(Object(l["E"])(t,C,r.join(" ")),Object(l["F"])(t,k,"none")):(Object(l["x"])(t,C),Object(l["A"])(t,k)),Object(l["B"])((function(){B(t,a)})),Object(b["a"])(r,t[O])||(t[O]=r,r.forEach((function(t){a.context.$root.$emit(E,t)})))}},V={bind:function(t,e,a){t[h]=!1,t[O]=[],R(t,a),U(t,e,a)},componentUpdated:U,updated:U,unbind:function(t,e,a){T(t),L(t,a),M(t,_),M(t,g),M(t,h),M(t,O),Object(l["y"])(t,v),Object(l["y"])(t,p),Object(l["x"])(t,j),Object(l["x"])(t,C),Object(l["x"])(t,w),Object(l["A"])(t,k)}}},"3fda":function(t,e,a){"use strict";a("2c66")},"408a":function(t,e,a){var r=a("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=r(t))throw TypeError("Incorrect invocation");return+t}},"60bb":function(t,e,a){"use strict";a("c316")},"7db0":function(t,e,a){"use strict";var r=a("23e7"),i=a("b727").find,n=a("44d2"),c=a("ae40"),o="find",s=!0,l=c(o);o in[]&&Array(1)[o]((function(){s=!1})),r({target:"Array",proto:!0,forced:s||!l},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(o)},"7f93":function(t,e,a){"use strict";a("2236")},b680:function(t,e,a){"use strict";var r=a("23e7"),i=a("a691"),n=a("408a"),c=a("1148"),o=a("d039"),s=1..toFixed,l=Math.floor,u=function(t,e,a){return 0===e?a:e%2===1?u(t,e-1,a*t):u(t*t,e/2,a)},d=function(t){var e=0,a=t;while(a>=4096)e+=12,a/=4096;while(a>=2)e+=1,a/=2;return e},b=s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!o((function(){s.call({})}));r({target:"Number",proto:!0,forced:b},{toFixed:function(t){var e,a,r,o,s=n(this),b=i(t),f=[0,0,0,0,0,0],v="",p="0",m=function(t,e){var a=-1,r=e;while(++a<6)r+=t*f[a],f[a]=r%1e7,r=l(r/1e7)},_=function(t){var e=6,a=0;while(--e>=0)a+=f[e],f[e]=l(a/t),a=a%t*1e7},g=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==f[t]){var a=String(f[t]);e=""===e?a:e+c.call("0",7-a.length)+a}return e};if(b<0||b>20)throw RangeError("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return String(s);if(s<0&&(v="-",s=-s),s>1e-21)if(e=d(s*u(2,69,1))-69,a=e<0?s*u(2,-e,1):s/u(2,e,1),a*=4503599627370496,e=52-e,e>0){m(0,a),r=b;while(r>=7)m(1e7,0),r-=7;m(u(10,r,1),0),r=e-1;while(r>=23)_(1<<23),r-=23;_(1<<r),m(1,1),_(2),p=g()}else m(0,a),m(1<<-e,0),p=g()+c.call("0",b);return b>0?(o=p.length,p=v+(o<=b?"0."+c.call("0",b-o)+p:p.slice(0,o-b)+"."+p.slice(o-b))):p=v+p,p}})},c316:function(t,e,a){},d58f:function(t,e,a){var r=a("1c0b"),i=a("7b0b"),n=a("44ad"),c=a("50c4"),o=function(t){return function(e,a,o,s){r(a);var l=i(e),u=n(l),d=c(l.length),b=t?d-1:0,f=t?-1:1;if(o<2)while(1){if(b in u){s=u[b],b+=f;break}if(b+=f,t?b<0:d<=b)throw TypeError("Reduce of empty array with no initial value")}for(;t?b>=0:d>b;b+=f)b in u&&(s=a(s,u[b],b,l));return s}};t.exports={left:o(!1),right:o(!0)}},e98b:function(t,e,a){"use strict";a.d(e,"a",(function(){return m}));var r=a("2b0e"),i=a("b42e"),n=a("c637"),c=a("a723"),o=a("d82f"),s=a("cf75"),l=a("4a38"),u=a("aa59");function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function b(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(Object(a),!0).forEach((function(e){f(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function f(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var v=Object(o["j"])(u["b"],["event","routerTag"]);delete v.href.default,delete v.to.default;var p=Object(s["d"])(Object(o["m"])(b(b({},v),{},{pill:Object(s["c"])(c["g"],!1),tag:Object(s["c"])(c["t"],"span"),variant:Object(s["c"])(c["t"],"secondary")})),n["c"]),m=r["default"].extend({name:n["c"],functional:!0,props:p,render:function(t,e){var a=e.props,r=e.data,n=e.children,c=a.active,o=a.disabled,d=Object(l["d"])(a),b=d?u["a"]:a.tag,f=a.variant||"secondary";return t(b,Object(i["a"])(r,{staticClass:"badge",class:["badge-".concat(f),{"badge-pill":a.pill,active:c,disabled:o}],props:d?Object(s["e"])(v,a):{}}),n)}})}}]);
//# sourceMappingURL=chunk-368e1e89.b947c146.js.map